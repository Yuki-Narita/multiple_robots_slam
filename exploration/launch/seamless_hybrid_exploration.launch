<launch>
    <env name="ROSCONSOLE_CONFIG_FILE" value="$(find exploration)/cfg/custom_rosconsole.config"/>

    <arg name="robot_name" default="robot1"/>
    <arg name="multi" default="false"/>

    <arg name="debug" default="false"/>
    <arg name="rotation" default="false"/>
    <arg name="fill_map" default="fill_map"/>
    
    <!-- <arg unless="$(arg multi)" name="map" default="/$(arg robot_name)/map"/> -->
    <arg unless="$(arg multi)" name="map" default="map_continuity"/>
    <arg if="$(arg multi)" name="map" default="/server/merge_map/grid"/>

    <group ns="$(arg robot_name)">
        <!-- exploration main -->
        <include file="$(find exploration)/launch/includes/seamless_hybrid_exploration.launch.xml">
            <arg name="pose_log" value="pose_log/merge"/>
            <arg name="end" value="end/area"/>
            <arg name="robot_name" value="$(arg robot_name)"/>
            <arg name="debug" value="$(arg debug)"/>
            <arg name="rotation" value="$(arg rotation)"/>
            <arg name="map" value="$(arg fill_map)"/>
            <arg unless="$(arg multi)" name="map_frame_id" default="$(arg robot_name)/map"/>
            <arg if="$(arg multi)" name="map_frame_id" default="/server/merge_map"/>
        </include>

        <!-- exploration support -->
        <include file="$(find exploration)/launch/includes/exploration_support.launch.xml">
            <arg name="frontier_detection" value="true"/>
            <arg name="branch_detection" value="true"/>
            <arg name="map_fill" value="true"/>
            <arg name="orig_map" value="$(arg map)"/>
            <arg name="fill_map" default="$(arg fill_map)"/>
        </include>
    </group>
</launch>
